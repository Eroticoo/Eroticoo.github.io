<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>{{ page.title }} - {{ site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
        
        // 转换 UTC 时间到东八区
        function convertToCST(utcString) {
            const date = new Date(utcString);
            const offset = 8 * 60 * 60 * 1000; // 8小时的毫秒数
            const cstDate = new Date(date.getTime() + offset);
            
            const pad = (num) => String(num).padStart(2, '0');
            
            return `${cstDate.getUTCFullYear()}-${pad(cstDate.getUTCMonth() + 1)}-${pad(cstDate.getUTCDate())} ` +
                   `${pad(cstDate.getUTCHours())}:${pad(cstDate.getUTCMinutes())}:${pad(cstDate.getUTCSeconds())} +0800`;
        }

        window.onload = function() {
            const timeElements = document.querySelectorAll('.post-time');
            timeElements.forEach(element => {
                const utcTime = element.getAttribute('data-time');
                if (utcTime) {
                    element.textContent = '发布时间：' + convertToCST(utcTime);
                }
            });
        }
    </script>
</head>
<body>
    <header>
        <h1><a href="{{ '/' | relative_url }}">{{ site.title }}</a></h1>
    </header>
    <main>
        {{ content }}
        {% if page.date %}
        <p class="post-time" data-time="{{ page.date | date_to_xmlschema }}">
            发布时间：{{ page.date | date: "%Y-%m-%d %H:%M:%S %z" }}
        </p>
        {% endif %}
    </main>
    <footer>
        <p>© {{ site.time | date: '%Y' }} {{ site.author }}</p>
    </footer>
</body>
</html>